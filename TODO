Create available_foos based on configured components
Make validates_components ohtomatically do shit instead of using :through
